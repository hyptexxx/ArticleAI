(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"row items-center justify-evenly"},[n("ClassComponent")],1)},r=[],i=n("60a3"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticStyle:{width:"100%",height:"100%",padding:"20px"}},[n("q-card-section",[n("q-stepper",{ref:"stepper",attrs:{color:"primary",animated:""},scopedSlots:t._u([{key:"navigation",fn:function(){return[n("q-stepper-navigation",[t.files&&5!==t.step?n("q-btn",{attrs:{color:"primary",label:4===t.step?"Получить рекомендации":"Следующий шаг"},on:{click:function(e){t.$refs.stepper.next(),t.nextHandler()}}}):t._e(),t.step>1?n("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Назад"},on:{click:function(e){return t.$refs.stepper.previous()}}}):t._e()],1)]},proxy:!0},{key:"message",fn:function(){return[1===t.step?n("q-banner",{staticClass:"bg-purple-8 text-white q-px-lg"},[t._v("Загрузите публикацию")]):2===t.step?n("q-banner",{staticClass:"bg-orange-8 text-white q-px-lg"},[t._v("Рекомендации")]):t._e()]},proxy:!0}]),model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[n("q-step",{staticStyle:{"min-height":"200px"},attrs:{name:1,title:"Загрузите публикацию",icon:"settings",done:t.step>1}},[n("q-checkbox",{attrs:{label:"Включить эксперементальный режим"},model:{value:t.isExperementalEnabled,callback:function(e){t.isExperementalEnabled=e},expression:"isExperementalEnabled"}}),n("q-file",{attrs:{filled:"","bottom-slots":"",multiple:"",label:"Публикация",counter:"","max-files":"1000"},scopedSlots:t._u([{key:"before",fn:function(){return[n("q-icon",{attrs:{name:"folder_open"}})]},proxy:!0},{key:"hint",fn:function(){return[t._v("Выберите публикацию для анализа")]},proxy:!0},{key:"append",fn:function(){return[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:function(t){t.stopPropagation()}}})]},proxy:!0}]),model:{value:t.files,callback:function(e){t.files=e},expression:"files"}})],1),n("q-step",{staticStyle:{"min-height":"200px"},attrs:{name:2,title:"Рекомендации",icon:"add_comment"}},[n("div",{staticClass:"q-pa-md row items-start q-gutter-md"},[n("q-card",{staticClass:"my-card bg-indigo-7 text-white"},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("Общие рекомендации по увеличению актуальности")]),n("div",{staticClass:"text-subtitle2"},[t._v("Предложения для правок в тексте")])]),n("q-card-section",[n("q-chip",{staticClass:"bg-indigo-5",attrs:{square:"","text-color":"white","icon-right":"edit"}},[t._v("Внесите предложенные правки в ключевые слова")])],1),n("q-card-section",[n("div",{staticClass:"text-subtitle2"},[t._v("Не вносите в текст следующие ключевые слова:")]),n("q-chip",{attrs:{square:"","text-color":"white",color:"red","icon-right":"remove"}},[t._v(t._s(this.recomendation.classKeywordPairMin.keyword))])],1),n("q-separator",{attrs:{dark:""}}),n("q-card-actions",[n("q-btn",{attrs:{flat:""}},[t._v("Принять")]),n("q-btn",{attrs:{flat:""}},[t._v("Отклонить")])],1)],1),n("q-card",{staticClass:"my-card bg-indigo-7 text-white"},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("Рекомендации по редактированию ключевых слов")]),n("div",{staticClass:"text-subtitle2"},[t._v("Ключевые слова")])]),n("q-card-section",[n("q-chip",{attrs:{square:"","text-color":"white",color:"green","icon-right":"add"}},[t._v(t._s(this.recomendation.classKeywordPairMax.keyword))])],1),n("q-separator",{attrs:{dark:""}}),n("q-card-actions",[n("q-btn",{attrs:{flat:""}},[t._v("Принять")]),n("q-btn",{attrs:{flat:""}},[t._v("Отклонить")])],1)],1),n("q-card",{staticClass:"my-card bg-indigo-7 text-white"},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("Предполагаемые темы по ключевым словам текста статьи")]),n("div",{staticClass:"text-subtitle2"},[t._v("Ключевые слова")])]),n("q-card-section",t._l(this.recomendation.classKeywordPairs,(function(e){return n("q-chip",{attrs:{square:"","text-color":"white",color:"green"}},[t._v(t._s(e.cluster))])})),1),n("q-separator",{attrs:{dark:""}})],1),n("q-card",{staticClass:"my-card bg-indigo-7 text-white"},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("Общая статистика")]),n("div",{staticClass:"text-subtitle2"},[t._v("Результаты анализа")])]),n("q-card-section",[this.recomendation.actuality>50?n("q-chip",{attrs:{square:"",color:"green","text-color":"white","icon-right":"star"}},[t._v("Актуальность составляет "+t._s(this.recomendation.actuality)+"%")]):n("q-chip",{attrs:{square:"",color:"yellow","text-color":"black","icon-right":"star"}},[t._v("Актуальность составляет "+t._s(this.recomendation.actuality)+"%")])],1),n("q-card-section",[n("q-table",{attrs:{title:"Класс -> Актуальность",data:this.recomendation.classesActuality,separator:t.separator,"virtual-scroll":"",columns:t.b,"pagination.sync":"pagination","rows-per-page-options":[0],"row-key":"name"}}),n("q-table",{attrs:{title:"Ключевые слова -> Классы -> актуальность класса",data:this.recomendation.classKeywordPairs,separator:t.separator,"virtual-scroll":"",columns:t.a,"pagination.sync":"pagination","rows-per-page-options":[0],"row-key":"keyword"}})],1)],1)],1)])],1)],1)],1)},s=[],l=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),c=function(t,e,n,a){var r,i=arguments.length,o=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(i<3?r(o):i>3?r(e,n,o):r(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},u=function(t,e,n,a){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function o(t){try{l(a.next(t))}catch(e){i(e)}}function s(t){try{l(a["throw"](t))}catch(e){i(e)}}function l(t){t.done?n(t.value):r(t.value).then(o,s)}l((a=a.apply(t,e||[])).next())}))},p=function(t,e){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");while(o)try{if(n=1,a&&(r=2&i[0]?a["return"]:i[0]?a["throw"]||((r=a["return"])&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.getActualityRequest=function(t){return u(this,void 0,Promise,(function(){var e,n;return p(this,(function(a){switch(a.label){case 0:return e=new FormData,e.append("classes",JSON.stringify(t)),[4,this.$axios.post("/api/actuality/analyze",e)];case 1:return n=a.sent(),[2,n.data]}}))}))},e.prototype.classesAnalyseRequest=function(t,e){return u(this,void 0,Promise,(function(){var n,a;return p(this,(function(r){switch(r.label){case 0:return n=new FormData,n.append("analyseResponse",JSON.stringify(t.yakeResponse)),n.append("articleId",e.toString()),[4,this.$axios.post("/api/classes/analyse",n)];case 1:return a=r.sent(),[2,a.data]}}))}))},e.prototype.sendToNlp=function(t){return u(this,void 0,Promise,(function(){var e,n;return p(this,(function(a){switch(a.label){case 0:return e=new FormData,e.append("yakeData",JSON.stringify(t)),[4,this.$axios.post("/api/nlp/analyse",e)];case 1:return n=a.sent(),[2,n.data]}}))}))},e.prototype.sendAndAnalyse=function(t){return u(this,void 0,Promise,(function(){var e,n;return p(this,(function(a){switch(a.label){case 0:return e=new FormData,t.files&&t.files.forEach((function(t){e.append("files",t)})),[4,this.$axios.post("/api/files/analyze",this.createFormDataForArticleFile(t,e),{headers:{"Content-Type":"multipart/form-data"}})];case 1:return n=a.sent(),[2,n.data]}}))}))},e.prototype.sendRequestToYandexFromServer=function(){return u(this,void 0,Promise,(function(){var t;return p(this,(function(e){switch(e.label){case 0:return[4,this.$axios.get("/api/yandex/search_count")];case 1:return t=e.sent(),[2,t.data]}}))}))},e.prototype.sendTextAndAnalyse=function(t){return u(this,void 0,Promise,(function(){var e,n;return p(this,(function(a){switch(a.label){case 0:return e=new FormData,e.append("language",t.language),e.append("max_ngram_size",t.maxNgramSize.toString()),e.append("deduplication_thresold",t.deduplicationThresold.toString()),e.append("deduplication_algo",t.deduplicationAlgo.toString()),e.append("windowSize",t.windowSize.toString()),e.append("number_of_keywords",t.numberOfKeywords.toString()),e.append("text",t.text),[4,this.$axios.post("/api/yake/analyze",e)];case 1:return n=a.sent(),[2,n.data]}}))}))},e.prototype.saveResultRequest=function(t,e,n){return u(this,void 0,Promise,(function(){var a,r;return p(this,(function(i){switch(i.label){case 0:return a=new FormData,a.append("analyseResponse",JSON.stringify(t.yakeResponse)),a.append("classes",JSON.stringify(n)),this.createFormDataForArticleFile(e,a),e.files&&e.files.forEach((function(t){a.append("files",t)})),[4,this.$axios.post("/api/yake/saveResultEntity",a)];case 1:return r=i.sent(),200===r.status?[2,r.data]:[2,null]}}))}))},e.prototype.actualityAnalyseRequest=function(t){return u(this,void 0,Promise,(function(){var e,n;return p(this,(function(a){switch(a.label){case 0:return e=new FormData,e.append("analyseResponse",JSON.stringify(t)),[4,this.$axios.post("/api/actuality/analyse",e)];case 1:return n=a.sent(),n.data||console.log("notify"),[2,n.data]}}))}))},e.prototype.createFormDataForArticleFile=function(t,e){return e.append("language",t.meta.language),e.append("max_ngram_size",t.meta.maxNgramSize.toString()),e.append("deduplication_thresold",t.meta.deduplicationThresold.toString()),e.append("deduplication_algo",t.meta.deduplicationAlgo.toString()),e.append("windowSize",t.meta.windowSize.toString()),e.append("number_of_keywords",t.meta.numberOfKeywords.toString()),e.append("text",t.meta.text),e},e.prototype.loadSavedResults=function(t){return u(this,void 0,Promise,(function(){var e,n;return p(this,(function(a){switch(a.label){case 0:return e=new FormData,e.append("yakeId",t.toString()),[4,this.$axios.post("/api/yake/response",e)];case 1:return n=a.sent(),[2,n.data]}}))}))},e=c([i["a"]],e),e}(i["c"]),f=d,h=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),y=function(){return y=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},y.apply(this,arguments)},m=function(t,e,n,a){var r,i=arguments.length,o=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(i<3?r(o):i>3?r(e,n,o):r(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},g=function(t,e,n,a){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function o(t){try{l(a.next(t))}catch(e){i(e)}}function s(t){try{l(a["throw"](t))}catch(e){i(e)}}function l(t){t.done?n(t.value):r(t.value).then(o,s)}l((a=a.apply(t,e||[])).next())}))},b=function(t,e){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(n)throw new TypeError("Generator is already executing.");while(o)try{if(n=1,a&&(r=2&i[0]?a["return"]:i[0]?a["throw"]||((r=a["return"])&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},w=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var a=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,r++)a[r]=i[o];return a},v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.files=null,e.separator="cell",e.pagination={rowsPerPage:0},e.step=1,e.nlpResponse=[],e.articleId=null,e.isExperementalEnabled=!1,e.columns=[{name:"ngram",required:!0,label:"Ключевое слово",align:"center"},{name:"score",label:"Значение важности",field:"Значение важности",align:"center",style:"width: 10px"}],e.original=[{yakeResponse:[{ngram:"",score:0}],generatedArticleId:0}],e.data={yakeResponse:[{ngram:"",score:0}],generatedArticleId:0},e.recomendation={actuality:0,classKeywordPairMax:{actuality:0,cluster:"",keyword:""},classKeywordPairMin:{actuality:0,cluster:"",keyword:""},classKeywordPairs:[{actuality:0,cluster:"",keyword:""}],classesActuality:[{classActuality:0,embedding:"",name:""}],keywordClassMax:""},e.a=[{name:"cluster",label:"Класс",field:"cluster",align:"center",style:"width: 10px"},{name:"keyword",label:"Ключевая фраза",field:"keyword",align:"center",style:"width: 10px"},{name:"actuality",label:"Актаульность",field:"actuality",align:"center",style:"width: 10px"}],e.b=[{name:"name",label:"Класс",field:"name",align:"center",style:"width: 10px"},{name:"classActuality",label:"Актуальность",field:"classActuality",align:"center",style:"width: 10px"}],e.classColumns=[{name:"className",label:"Имя класса",field:"className",align:"center",style:"width: 10px"},{name:"actuality",label:"Вес класса",field:"actuality",align:"center",style:"width: 10px"},{name:"keywordText",label:"Ключевое слово",field:"keywordText",align:"center",style:"width: 10px"}],e.classes=[],e.articleFile={files:null,meta:{language:"ru",maxNgramSize:3,deduplicationThresold:1,deduplicationAlgo:"leve",windowSize:1,numberOfKeywords:10,text:""}},e.loading=!1,e}return h(e,t),e.prototype.qwe=function(){console.log(this.isExperementalEnabled)},e.prototype.removeRow=function(t){for(var e=0;e<document.getElementsByClassName("remove-row-btn").length;e++)document.getElementsByClassName("remove-row-btn")[e]===t.currentTarget&&this.data.yakeResponse.splice(e,1)},e.prototype.addRow=function(){this.loading=!0;var t=this.data.yakeResponse.length+1,e=this.original,n=y({},e);this.data.yakeResponse=w(this.data.yakeResponse.slice(0,t),[n],this.data.yakeResponse.slice(t)),this.loading=!1},e.prototype.nextHandler=function(){return g(this,void 0,Promise,(function(){var t,e,n;return b(this,(function(a){switch(a.label){case 0:switch(this.loading=!0,t=this.step,t){case 2:return[3,1]}return[3,5];case 1:return this.data.yakeResponse=this.data.yakeResponse.splice(0,this.data.yakeResponse.length),this.nlpResponse=this.nlpResponse.splice(0,this.nlpResponse.length),this.articleFile?(this.articleFile.files=this.files,e=this,[4,this.sendAndAnalyse(this.articleFile)]):[3,4];case 2:return e.data=a.sent(),this.isExperementalEnabled?this.data&&this.data.yakeResponse.length?(n=this,[4,this.sendToNlp(this.data.yakeResponse)]):[3,4]:[3,4];case 3:n.recomendation=a.sent(),0===this.nlpResponse.length&&this.$q.notify({color:"warning",message:"Не удалось отфильтровать данные по публикации",icon:"report_problem",progress:!0,position:"bottom"}),a.label=4;case 4:return[3,5];case 5:return this.loading=!1,[2]}}))}))},e.prototype.saveResult=function(){return g(this,void 0,Promise,(function(){var t;return b(this,(function(e){switch(e.label){case 0:return this.data&&this.articleFile?[4,this.saveResultRequest(this.data,this.articleFile,this.classes)]:[3,2];case 1:t=e.sent(),t&&(this.articleId=t),e.label=2;case 2:return[2]}}))}))},m([Object(i["d"])("isExperementalEnabled")],e.prototype,"qwe",null),e=m([i["a"]],e),e}(Object(i["b"])(f)),x=v,_=x,q=n("2877"),k=n("f09f"),R=n("a370"),S=n("f531"),O=n("87fe"),P=n("8f8e"),C=n("7d53"),A=n("0016"),F=n("9c40"),j=n("b047"),E=n("eb85"),N=n("4b7e"),D=n("eaac"),Q=n("b19c"),T=n("54e1"),$=n("eebe"),z=n.n($),K=Object(q["a"])(_,o,s,!1,null,null,null),J=K.exports;z()(K,"components",{QCard:k["a"],QCardSection:R["a"],QStepper:S["a"],QStep:O["a"],QCheckbox:P["a"],QFile:C["a"],QIcon:A["a"],QBtn:F["a"],QChip:j["a"],QSeparator:E["a"],QCardActions:N["a"],QTable:D["a"],QStepperNavigation:Q["a"],QBanner:T["a"]});var I=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),M=function(t,e,n,a){var r,i=arguments.length,o=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,n,a);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(i<3?r(o):i>3?r(e,n,o):r(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return I(e,t),e=M([Object(i["a"])({components:{ClassComponent:J}})],e),e}(i["c"]),G=B,H=G,Y=n("9989"),L=Object(q["a"])(H,a,r,!1,null,null,null);e["default"]=L.exports;z()(L,"components",{QPage:Y["a"]})}}]);